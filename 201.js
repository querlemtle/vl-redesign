"use strict";(self.webpackChunkvl_redesign=self.webpackChunkvl_redesign||[]).push([[201],{5201:function(e,s,t){t.r(s),t.d(s,{default:function(){return k}});var i="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9IjAgMCAyMiAyMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0yMC42IDFMMS40IDIxTTIxIDIwLjZMMSAxLjQiIHN0cm9rZT0iIzExMkU0NCIgc3Ryb2tlLW9wYWNpdHk9IjAuODUiLz4NCjwvc3ZnPg0K",n=t(4976),a=t(5556),c=t.n(a),r=t(6540),d=t(6013),l=t(4848);const{"section-center":o,col:_,grid:u,"grid--wrap":h,section__title:m,card:j,card__item:x,"text--accent":p,aside:N,aside__body:f,aside__container:g,aside__title:I,aside__accent:b,btn:v,"btn--fill":y,link:w,msg:M}={"section-center":"section-center_XY9Wdq",section__title:"section__title_FGKz5U",grid:"grid_taKzam",card:"card_xRQyPW","grid--wrap":"grid--wrap_aiY_E1",col:"col_GUGw_W",card__item:"card__item_hEq7lL","text--accent":"text--accent__dSGyN",aside:"aside_S1ot1U",aside__container:"aside__container_MsB0p8",aside__title:"aside__title_q9vCc4",aside__body:"aside__body_Jg3WeW",aside__accent:"aside__accent_QVp1jh",btn:"btn_XyMACa","btn--fill":"btn--fill_nRvFhg",link:"link_SbXTfT",msg:"msg_F3Ba2b"};function $(){return(0,l.jsxs)("div",{className:M,children:[(0,l.jsx)("h3",{children:"購物車中還沒有任何商品！"}),(0,l.jsx)(n.N_,{to:"/shop",className:`${v} ${y}`,children:"前往選購"})]})}function q(e){let{productId:s,productImage:t,productName:n,price:a,variants:c,deleteItem:d}=e;return(0,l.jsxs)("div",{className:j,children:[(0,l.jsx)("img",{src:t,alt:n}),(0,l.jsxs)("div",{className:_,children:[(0,l.jsx)("h3",{children:n}),(0,l.jsx)("div",{className:`${u} ${h}`,children:c.map((e=>(0,l.jsxs)(r.Fragment,{children:[(0,l.jsxs)("div",{className:`${_} ${x}`,children:[(0,l.jsx)("span",{children:"規格"}),(0,l.jsx)("p",{children:e.name})]}),(0,l.jsxs)("div",{className:`${_} ${x}`,children:[(0,l.jsx)("span",{children:"數量"}),(0,l.jsx)("p",{children:e.qty})]})]},e.variantId)))}),(0,l.jsx)("span",{className:p,children:"商品預購期約14-30天不等，較難提供確切到貨時間還請見諒。"})]}),(0,l.jsxs)("h4",{children:["NT$",(0,l.jsx)("span",{children:function(e,s){if(!s||0===s.length)return;let t=0;for(const i of s)t+=e*i.qty;return t}(a,c)})]}),(0,l.jsx)("button",{type:"button",className:v,onClick:()=>d(s),children:(0,l.jsx)("img",{src:i,alt:"刪除商品按鈕"})})]})}function k(){const[e,s]=(0,r.useState)((()=>(0,d.A)())),[t,i]=(0,r.useState)((()=>a(e.data)));function a(e){if(!e)return 0;let s=0;for(const t of e)t.variants.forEach((e=>s+=t.price*e.qty));return s}function c(t){const n=e.data.filter((e=>e.productId!==t));let c=0;for(const e of n)e.variants.forEach((e=>c+=e.qty));const r={totalQty:c,data:n};window.localStorage.setItem("cart",JSON.stringify(r)),s(r),i(a(n))}return(0,l.jsxs)("section",{className:o,children:[(0,l.jsx)("h2",{className:m,children:"購物車內容"}),0===e.totalQty?(0,l.jsx)($,{}):(0,l.jsxs)("div",{className:u,children:[(0,l.jsx)("div",{children:e.data.map((e=>(0,l.jsx)(q,{...e,deleteItem:c},e.productId)))}),(0,l.jsxs)("aside",{className:N,children:[(0,l.jsxs)("div",{className:g,children:[(0,l.jsx)("p",{className:I,children:"訂單金額確認"}),(0,l.jsxs)("div",{className:`${u} ${f}`,children:[(0,l.jsx)("p",{children:"購物車總計"}),(0,l.jsxs)("p",{className:b,children:["NT$",(0,l.jsx)("span",{children:t})]})]}),(0,l.jsx)(n.N_,{to:"/checkout",className:`${v} ${y}`,children:"前往結帳"})]}),(0,l.jsx)(n.N_,{to:"/shop",className:w,children:"繼續選購"})]})]})]})}q.propTypes={productId:c().string.isRequired,productImage:c().string.isRequired,productName:c().string.isRequired,price:c().number.isRequired,variants:c().array.isRequired,deleteItem:c().func.isRequired}},6013:function(e,s,t){function i(){const e=JSON.parse(window.localStorage.getItem("cart"));return!e||function(e){for(const s in e)if(Object.hasOwn(e,s))return!1;return!0}(e)?{totalQty:0,data:null}:e}t.d(s,{A:function(){return i}})}}]);